# =============================================================================
# WEELO BACKEND - PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
#
# Copy this file to .env.production and fill in the values.
# NEVER commit the actual .env.production file to version control!
#
# AWS SECRETS MANAGER RECOMMENDED:
# For production, store secrets in AWS Secrets Manager and fetch at runtime.
# =============================================================================

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# Number of worker processes (default: number of CPU cores)
# Set to specific number to limit resource usage
WORKERS=4

# -----------------------------------------------------------------------------
# DATABASE (AWS RDS PostgreSQL)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://weelo:PASSWORD@your-rds-endpoint.ap-south-1.rds.amazonaws.com:5432/weelo?ssl=true

# Individual components (alternative to DATABASE_URL)
RDS_HOST=your-rds-endpoint.ap-south-1.rds.amazonaws.com
RDS_PORT=5432
RDS_DATABASE=weelo
RDS_USERNAME=weelo
RDS_PASSWORD=your-secure-password

# Read replicas (optional, for read scaling)
RDS_READ_REPLICA_1=your-read-replica-1.ap-south-1.rds.amazonaws.com
RDS_READ_REPLICA_2=your-read-replica-2.ap-south-1.rds.amazonaws.com

# -----------------------------------------------------------------------------
# REDIS (AWS ElastiCache)
# -----------------------------------------------------------------------------
REDIS_ENABLED=true
REDIS_HOST=your-redis-endpoint.ap-south-1.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password

# Cluster mode (if using ElastiCache cluster)
REDIS_CLUSTER=false
REDIS_NODES=node1.cache.amazonaws.com:6379,node2.cache.amazonaws.com:6379

# -----------------------------------------------------------------------------
# AUTHENTICATION
# -----------------------------------------------------------------------------
# JWT secrets - MUST be strong random strings (64+ chars)
# Generate with: openssl rand -base64 64
JWT_SECRET=your-super-secure-jwt-secret-at-least-64-characters-long-here
JWT_REFRESH_SECRET=your-super-secure-refresh-secret-at-least-64-characters-long
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# -----------------------------------------------------------------------------
# SMS PROVIDER (Twilio / MSG91 / AWS SNS)
# -----------------------------------------------------------------------------
SMS_PROVIDER=twilio

# Twilio
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# MSG91 (India)
MSG91_AUTH_KEY=your-msg91-auth-key
MSG91_SENDER_ID=WEELO
MSG91_TEMPLATE_ID=your-template-id

# AWS SNS (alternative)
AWS_SNS_REGION=ap-south-1

# -----------------------------------------------------------------------------
# GOOGLE MAPS (Places, Geocoding, Directions)
# -----------------------------------------------------------------------------
# Required in production for search suggestions
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# -----------------------------------------------------------------------------
# PUSH NOTIFICATIONS (Firebase Cloud Messaging)
# -----------------------------------------------------------------------------
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour Firebase private key here\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@your-project.iam.gserviceaccount.com

# Or path to service account JSON
FIREBASE_SERVICE_ACCOUNT_PATH=/app/config/firebase-service-account.json

# -----------------------------------------------------------------------------
# AWS CONFIGURATION
# -----------------------------------------------------------------------------
AWS_REGION=ap-south-1
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key

# S3 for file uploads
S3_BUCKET=weelo-uploads
S3_REGION=ap-south-1

# CloudWatch Logs
CLOUDWATCH_LOG_GROUP=/weelo/production
CLOUDWATCH_LOG_STREAM=api

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
# CORS - allowed origins (comma-separated)
CORS_ORIGINS=https://app.weelo.in,https://captain.weelo.in,https://admin.weelo.in

# Rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Request size limits
MAX_REQUEST_SIZE=10mb

# Trusted proxies (for getting real client IP behind load balancer)
TRUST_PROXY=true

# -----------------------------------------------------------------------------
# MONITORING
# -----------------------------------------------------------------------------
# Log level: error, warn, info, debug
LOG_LEVEL=warn

# Log retention in CloudWatch (days)
LOG_RETENTION_DAYS=30

# Metrics
METRICS_ENABLED=true

# Error tracking (Sentry)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
FEATURE_MULTI_VEHICLE_ORDERS=true
FEATURE_REAL_TIME_TRACKING=true
FEATURE_BROADCAST_SYSTEM=true

# -----------------------------------------------------------------------------
# BUILD INFO (set by CI/CD)
# -----------------------------------------------------------------------------
BUILD_TIME=2024-01-15T10:00:00Z
COMMIT_HASH=abc1234
BUILD_NUMBER=123
